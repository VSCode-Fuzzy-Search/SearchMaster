name: Preflight

on:
    push:
        branches:
            - 'main'
    create:
        tags:
            - '*'

jobs:
    # We want to make sure that the release is only created if changes were actually made to business logic.
    preflight:
        name: Preflight
        runs-on: ubuntu-latest
        steps:
            - name: Check Coverage Artifact Exists
              id: coverage-artifact-exists
              uses: xSAVIKx/artifact-exists-action@v0
              with:
                  name: 'coverage-summary.json'

            - name: Share Preflight Results
              uses: edumserrano/share-jobs-data@v1
              with:
                  command: set-data
                  data: |
                      coverage-artifact-exists: ${{ steps.coverage-artifact-exists.outputs.exists }}
